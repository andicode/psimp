@using Ext.Net.MVC
@using Ext.Net
@{
    Layout = null;
}
@(Html.X()
    .MenuPanel()
    .Border(false)
    .ID("ProjectForm_MenuPanel")
    .Width(150)
    .Region(Region.West)
    .SelectedIndex(0)
    .Menu(menus =>
    {
        menus.ID = "ProjectForm_Menu";
        menus.Items.Add(Html.X().MenuItem().Text("项目信息").Listeners(events => events.Click.Handler = "App.Project_Card.getLayout().setActiveItem(0)"));
        menus.Items.Add(Html.X().MenuItem().Text("监理合同段信息").Listeners(events => events.Click.Handler = "App.Project_Card.getLayout().setActiveItem(1)"));
        menus.Items.Add(Html.X().MenuItem().Text("施工单位").Listeners(events => events.Click.Handler = "App.Project_Card.getLayout().setActiveItem(2)"));
    })
)
@(Html.X()
    .Container()
    .Border(false)
    .ID("Project_Card")
    .Region(Region.Center)
    .Layout(LayoutType.Card)
    .ActiveIndex(0)
    .Items(
        Html.X()
            .FormPanel()
            .ID("Project_Basic_Info")
            .Title("项目信息")
            .Url(Url.Action("Save"))
            .BodyPadding(20)
            .JsonSubmit(true)
            .TopBar(Html.X()
                .Toolbar().Items(toolbarItems =>
                {
                    toolbarItems.Add(Html.X()
                                        .Button()
                                        .Text("保存")
                                        .Icon(Icon.Disk)
                                        .Listeners(events =>
                                        {
                                            events.Click.Handler = "this.up('form').submit()";// Url.Action("Save");
                                        })
                                    );
                }))
            .Defaults(defaults =>
            {
                defaults.Add(new { MsgTarget = "under" });
            })
            .ItemsFromPartial("_ProjectInfo")
        , Html.X()
            .Panel()
            .Title("监理合同段信息")
            .Header(false)
            .Border(false)
            .Layout( LayoutType.Fit)
            .ItemsFromPartial("_ContractInfo",true)
        , Html.X()
            .Panel()
            .Title("施工单位")
            .Header(false)
            .Border(false)
            .Layout(LayoutType.Fit)
            .ItemsFromPartial("_ConstructionInfo",true)        
    )
)
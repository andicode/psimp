@using Ext.Net.MVC
@using Ext.Net
@model PSIMP.Models.Person
@{
    Layout = null;
}
@(Html.X()
    .Container()
    .Border(false)
    .Width(130)
    .Padding(5)
    .Region(Region.West)
    .Items(Html.X()
            .FieldSet()
            .Frame(true)
            .Title("一寸照片")
            .Width(120)
            .Height(180)
            .Layout(LayoutType.Fit)
            .Items(Html.X()
                       .Image()
                       .ID("person_info_image")
                       .ImageUrl(Url.Content("~/Images/person/default.jpg"))
            )
                , Html.X()
                    .FileUploadField()
                    .Name("TempPicture")
                    .ButtonText("选择文件")
                    .ButtonOnly(true)
                    .Listeners(events =>
                    {
                        events.Change.Handler = "App.FileStatus_Label.setText('已选择文件')";
                    })
            ,Html.X().Label().ID("FileStatus_Label").EmptyText("未选择文件")
    )
)
@(Html.X()
    .Panel()
    .Frame(true)
    .Border(false)
    .Header(false)
    .BodyPadding(10)
    .Region(Region.Center)
    .Items(
            Html.X().HiddenFor(m => m.Id).ID("person_Info_Id").Listeners(events => {
                events.Change.Fn = "person.setFormState";
            })
            , Html.X().HiddenFor(m=>m.Picture).ID("person_info_picture").Listeners(events => {
                events.Change.Fn = "person.setFormState";
            })
            , Html.X().TextFieldFor(m => m.Name)
            , Html.X().ComboBoxFor(m => m.Sex).Editable(false).ItemsFromEnum(typeof(PSIMP.Web.Models.Enums.Sex))
            , Html.X().TextFieldFor(m => m.IDCard)
            , Html.X().TextFieldFor(m => m.Census)
            , Html.X().NumberFieldFor(m => m.Height)
            , Html.X().NumberFieldFor(m => m.Age)
            , Html.X().TextFieldFor(m => m.Telephone)
            , Html.X().TextFieldFor(m => m.Email)
    )
)

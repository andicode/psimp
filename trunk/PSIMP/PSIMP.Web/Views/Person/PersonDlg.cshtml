@{
    Layout = null;
    var bid = ViewBag.BackID;
    var bname = ViewBag.BackName;
}
@model PM_PersonBaseInfo
@(
 Html.X().Window()
    .Title("可选人员(双击人员姓名选择)")
    .Width(430)
    .Layout(LayoutType.Fit)
    .CloseAction(CloseAction.Destroy)
    .Height(300)
    .Border(false)
    .Modal(true)
    .Items(
        Html.X().GridPanel()
            .View(Html.X().GridView().LoadingText("正加载可选人员..."))
            .Store(
                Html.X().StoreFor<PM_PersonBaseInfo>()
            )
            .ColumnModel(
                Html.X().ColumnFor(m => m.PersonName).ToBuilder<Column.Builder>().MenuDisabled(true).Width(100)               
                ,Html.X().ColumnFor(m => m.Sex).ToBuilder<TemplateColumn.Builder>().MenuDisabled(true).Width(100)
                ,Html.X().ColumnFor(m => m.IDNumber).ToBuilder<Column.Builder>().MenuDisabled(true).Flex(1)
            )
            .Listeners(events => {
                events.ItemDblClick.Handler =@"
App." + bid + @".setValue(record.data.ID);
App." + bname + @".setValue(record.data.PersonName);
this.up('window').close();
";  
            })
            .BottomBar(Html.X().PagingToolbar())
    )
)
@{
    Layout = null;
}
@(Html.X()
    .Container()
    .Layout(LayoutType.Border)
    .Items(
        //功能菜单
         Html.X().TreePanel()
            .SelectionModel(
                Html.X().TreeSelectionModel().ID("ProjectMenuSelectModel").SelectedIndex(0)
            )
            .Region(Region.West)
            .Split(true)
            .Width(150)
            .RootVisible(false)
            .UseArrows(true)
            .Fields(
                new ModelField {  Name="id"},
                new ModelField {  Name="text"},
                new ModelField {  Name="type"}
            )
            .Root(Html.X().Node().Text("root").NodeID("root")
                      .Children(
                            Html.X().Node().Text("项目信息").NodeID("0").Icon(Icon.TagGreen).Leaf(true),
                            Html.X().Node().Text("合同信息").NodeID("1").Icon(Icon.TagGreen).Leaf(true),
                            Html.X().Node().Text("项目人员管理").NodeID("2").Icon(Icon.TagGreen).Leaf(true),
                            Html.X().Node().Text("人员履约管理").NodeID("3").Icon(Icon.TagGreen).Leaf(true),
                            Html.X().Node().Text("项目实验备案").NodeID("4").Icon(Icon.TagGreen).Leaf(true),
                            Html.X().Node().Text("预警或提示信息").NodeID("5").Icon(Icon.TagGreen).Leaf(true),
                            Html.X().Node().Text("项目查询").NodeID("6").Icon(Icon.TagGreen).Leaf(true)
                      )
            )
            .Listeners(events =>
            {
                //通过树节点的ID来判断打开的是那个功能
                events.ItemClick.Handler = @"App.Project_View.getLayout().setActiveItem(parseInt(record.data.id))";
            })
        , Html.X()
              .Panel()
              .ID("Project_View")
              .Region(Region.Center)
              .Layout(LayoutType.Card)
              .Border(false)
        //功能区域分布视图
              .Items(
                   Html.X().LayzContainer(Url.Action("UI_BasicInfo"), "正在加载项目基本信息界面..."),
                   Html.X().LayzContainer(Url.Action("UI_Contracts"), "正在加载项目合同信息界面..."),
                   Html.X().Panel().Title("人员管理"),
                   Html.X().Panel().Title("人员履约"),
                   Html.X().Panel().Title("试验备案"),
                   Html.X().Panel().Title("预警或提示信息"),
                   Html.X().Panel().Title("项目查询"),
                   Html.X().LayzContainer(Url.Action("UI_Project"),"正在加载项目详情界面...",new { id=JRawValue.From("App.ProjectMenuSelectModel.getSelection()[0].data.id")}).ID("Project_Details_Card")
              )
        )       
)
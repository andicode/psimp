@{
    Layout = null;
}
@(Html.X()
    .Container()
    .Layout(LayoutType.Border)
    .Items(
         //功能菜单
         Html.X().TreePanel()
            .SelectionModel(
                Html.X().TreeSelectionModel().SelectedIndex(0)
            )
            .Region(Region.West)
            .Split(true)
            .Width(150)
            .RootVisible(false)
            .UseArrows(true)
            .Root(Html.X().Node().Text("root").NodeID("root")
                      .Children(
                          Html.X().Node().Text("人员信息").NodeID("0").Icon(Icon.TagGreen).Leaf(true),
                          Html.X().Node().Text("注册信息").NodeID("1").Icon(Icon.TagGreen).Leaf(true),
                          Html.X().Node().Text("证件管理").NodeID("2").Icon(Icon.TagGreen).Leaf(true),
                          Html.X().Node().Text("保险信息").NodeID("3").Icon(Icon.TagGreen).Leaf(true),
                          Html.X().Node().Text("合同信息").NodeID("4").Icon(Icon.TagGreen).Leaf(true),
                          Html.X().Node().Text("预警提示信息").NodeID("5").Icon(Icon.TagGreen).Leaf(true),
                          Html.X().Node().Text("人员查询").NodeID("6").Icon(Icon.TagGreen).Leaf(true)
                      )
            )
            .Listeners(events => {
                //通过树节点的ID来判断打开的是那个功能
                events.ItemClick.Handler = "App.Person_View.getLayout().setActiveItem(parseInt(record.data.id))";
            })
        , Html.X()
              .Panel()
              .ID("Person_View")
              .Cls("person-view")
              .Region(Region.Center)
              .Border(false)
              .Layout(LayoutType.Card)
              //功能区域分布视图
              .ItemsFromPartial("PersonUI_View")
        )
)

@(
 //人员信息弹出窗口
 Html.EditorWindow()
     .ID("Person_Window")
     .Title("人员信息")
     .Border(false)
     .Hidden(true)
     .Width(700)
     .Layout(LayoutType.Border)
     .Height(450)
     .ItemsFromPartial("PersonInfo")
)

@(
 //人员详情弹出窗口
 Html.EditorWindow()
    .ID("Person_Details")
    .Title("人员详情")
    .Hidden(true)
    .Width(800)
    .Height(500)
    .AutoScroll(true)
    .TopBar(
            Html.X().Toolbar()
                .Items(
                    Html.X().Button().Text("导出").Icon(Icon.ReportWord)
                    ,Html.X().Button().Text("打印").Icon(Icon.Printer)
                )
        )
    .Loader(
        //人员详情内容
        Html.X().ComponentLoader()
            .RemoveAll(true)
            .Url(Url.Action("details"))
            .Mode(LoadMode.Component)
            .LoadMask(mask =>
            {
                mask.ShowMask = true;
                mask.Msg = "加载中...";
            })
            .AutoLoad(false)
            .Listeners(events => {
                events.BeforeLoad.Handler = "App.Person_Details.removeAll()";
            })
    )
)